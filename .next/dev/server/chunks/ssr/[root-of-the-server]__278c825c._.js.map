{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/vasitum/Desktop/AmbiDrive/src/actions/car-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { Car } from \"@/components/car-card\";\nimport { revalidatePath } from \"next/cache\";\n\n// Map Prisma Car model to our frontend Car interface if necessary\n// Our schema matches the interface closely, except ID is string (UUID)\n// and we have createdAt/updatedAt which we might not show in the UI yet.\n\nexport async function getCars() {\n    try {\n        const cars = await prisma.car.findMany({\n            orderBy: {\n                createdAt: 'desc',\n            },\n        });\n        return cars;\n    } catch (error) {\n        console.error(\"Error fetching cars:\", error);\n        return [];\n    }\n}\n\nexport async function addCar(data: Omit<Car, \"id\">) {\n    try {\n        const car = await prisma.car.create({\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType, // Optional in interface? Check schema.\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error adding car:\", error);\n        throw new Error(\"Failed to add car\");\n    }\n}\n\nexport async function updateCar(data: Car) {\n    try {\n        const car = await prisma.car.update({\n            where: { id: data.id },\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType,\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error updating car:\", error);\n        throw new Error(\"Failed to update car\");\n    }\n}\n\nexport async function deleteCar(id: string) {\n    try {\n        await prisma.car.delete({\n            where: { id },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return true;\n    } catch (error) {\n        console.error(`Error deleting car with ID ${id}:`, JSON.stringify(error, null, 2));\n        console.error(error);\n        throw new Error(\"Failed to delete car\");\n    }\n}\n"],"names":[],"mappings":";;;;;;;MAUsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,2CAAA"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/vasitum/Desktop/AmbiDrive/src/actions/car-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { Car } from \"@/components/car-card\";\nimport { revalidatePath } from \"next/cache\";\n\n// Map Prisma Car model to our frontend Car interface if necessary\n// Our schema matches the interface closely, except ID is string (UUID)\n// and we have createdAt/updatedAt which we might not show in the UI yet.\n\nexport async function getCars() {\n    try {\n        const cars = await prisma.car.findMany({\n            orderBy: {\n                createdAt: 'desc',\n            },\n        });\n        return cars;\n    } catch (error) {\n        console.error(\"Error fetching cars:\", error);\n        return [];\n    }\n}\n\nexport async function addCar(data: Omit<Car, \"id\">) {\n    try {\n        const car = await prisma.car.create({\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType, // Optional in interface? Check schema.\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error adding car:\", error);\n        throw new Error(\"Failed to add car\");\n    }\n}\n\nexport async function updateCar(data: Car) {\n    try {\n        const car = await prisma.car.update({\n            where: { id: data.id },\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType,\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error updating car:\", error);\n        throw new Error(\"Failed to update car\");\n    }\n}\n\nexport async function deleteCar(id: string) {\n    try {\n        await prisma.car.delete({\n            where: { id },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return true;\n    } catch (error) {\n        console.error(`Error deleting car with ID ${id}:`, JSON.stringify(error, null, 2));\n        console.error(error);\n        throw new Error(\"Failed to delete car\");\n    }\n}\n"],"names":[],"mappings":";;;;;;;MAwBsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,0CAAA"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/vasitum/Desktop/AmbiDrive/src/actions/car-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { Car } from \"@/components/car-card\";\nimport { revalidatePath } from \"next/cache\";\n\n// Map Prisma Car model to our frontend Car interface if necessary\n// Our schema matches the interface closely, except ID is string (UUID)\n// and we have createdAt/updatedAt which we might not show in the UI yet.\n\nexport async function getCars() {\n    try {\n        const cars = await prisma.car.findMany({\n            orderBy: {\n                createdAt: 'desc',\n            },\n        });\n        return cars;\n    } catch (error) {\n        console.error(\"Error fetching cars:\", error);\n        return [];\n    }\n}\n\nexport async function addCar(data: Omit<Car, \"id\">) {\n    try {\n        const car = await prisma.car.create({\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType, // Optional in interface? Check schema.\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error adding car:\", error);\n        throw new Error(\"Failed to add car\");\n    }\n}\n\nexport async function updateCar(data: Car) {\n    try {\n        const car = await prisma.car.update({\n            where: { id: data.id },\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType,\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error updating car:\", error);\n        throw new Error(\"Failed to update car\");\n    }\n}\n\nexport async function deleteCar(id: string) {\n    try {\n        await prisma.car.delete({\n            where: { id },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return true;\n    } catch (error) {\n        console.error(`Error deleting car with ID ${id}:`, JSON.stringify(error, null, 2));\n        console.error(error);\n        throw new Error(\"Failed to delete car\");\n    }\n}\n"],"names":[],"mappings":";;;;;;;MAkDsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,6CAAA"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/vasitum/Desktop/AmbiDrive/src/actions/car-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { prisma } from \"@/lib/prisma\";\nimport { Car } from \"@/components/car-card\";\nimport { revalidatePath } from \"next/cache\";\n\n// Map Prisma Car model to our frontend Car interface if necessary\n// Our schema matches the interface closely, except ID is string (UUID)\n// and we have createdAt/updatedAt which we might not show in the UI yet.\n\nexport async function getCars() {\n    try {\n        const cars = await prisma.car.findMany({\n            orderBy: {\n                createdAt: 'desc',\n            },\n        });\n        return cars;\n    } catch (error) {\n        console.error(\"Error fetching cars:\", error);\n        return [];\n    }\n}\n\nexport async function addCar(data: Omit<Car, \"id\">) {\n    try {\n        const car = await prisma.car.create({\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType, // Optional in interface? Check schema.\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error adding car:\", error);\n        throw new Error(\"Failed to add car\");\n    }\n}\n\nexport async function updateCar(data: Car) {\n    try {\n        const car = await prisma.car.update({\n            where: { id: data.id },\n            data: {\n                make: data.make,\n                model: data.model,\n                year: data.year,\n                price: data.price,\n                mileage: data.mileage,\n                location: data.location,\n                image: data.image,\n                description: data.description,\n                condition: data.condition,\n                fuelType: data.fuelType,\n                transmission: data.transmission,\n            },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return car;\n    } catch (error) {\n        console.error(\"Error updating car:\", error);\n        throw new Error(\"Failed to update car\");\n    }\n}\n\nexport async function deleteCar(id: string) {\n    try {\n        await prisma.car.delete({\n            where: { id },\n        });\n        revalidatePath(\"/\");\n        revalidatePath(\"/admin\");\n        return true;\n    } catch (error) {\n        console.error(`Error deleting car with ID ${id}:`, JSON.stringify(error, null, 2));\n        console.error(error);\n        throw new Error(\"Failed to delete car\");\n    }\n}\n"],"names":[],"mappings":";;;;;;;MA6EsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,6CAAA"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/vasitum/Desktop/AmbiDrive/src/lib/supabase.ts"],"sourcesContent":["\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nif (!supabaseUrl || !supabaseKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseKey);\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/vasitum/Desktop/AmbiDrive/src/context/CarContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { Car } from \"@/components/car-card\";\nimport { getCars, addCar as addCarAction, updateCar as updateCarAction, deleteCar as deleteCarAction } from \"@/actions/car-actions\";\nimport { supabase } from \"@/lib/supabase\";\n\ninterface CarContextType {\n    cars: Car[];\n    addCar: (car: Omit<Car, \"id\">) => Promise<void>;\n    editCar: (car: Car) => Promise<void>;\n    deleteCar: (id: string) => Promise<void>;\n}\n\nconst CarContext = createContext<CarContextType | undefined>(undefined);\n\nexport function CarProvider({ children }: { children: React.ReactNode }) {\n    const [cars, setCars] = useState<Car[]>([]);\n    const [hasLoaded, setHasLoaded] = useState(false);\n\n    // Initial fetch and Real-time subscription\n    useEffect(() => {\n        const fetchCars = async () => {\n            const data = await getCars();\n            // Prisma returns Date objects for createdAt/updatedAt which are not in our UI Car interface yet,\n            // but they are spreadable. We cast to any/Car[] to satisfy TS.\n            setCars(data as any as Car[]);\n            setHasLoaded(true);\n        };\n\n        fetchCars();\n\n        const channel = supabase\n            .channel('realtime-cars')\n            .on(\n                'postgres_changes',\n                { event: '*', schema: 'public', table: 'Car' },\n                (payload) => {\n                    console.log('Real-time change received:', payload);\n                    if (payload.eventType === 'INSERT') {\n                        setCars((prev) => [payload.new as any as Car, ...prev]);\n                    } else if (payload.eventType === 'UPDATE') {\n                        setCars((prev) =>\n                            prev.map((car) => (car.id === payload.new.id ? (payload.new as any as Car) : car))\n                        );\n                    } else if (payload.eventType === 'DELETE') {\n                        setCars((prev) => prev.filter((car) => car.id !== payload.old.id));\n                    }\n                }\n            )\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(channel);\n        };\n    }, []);\n\n    const addCar = async (carData: Omit<Car, \"id\">) => {\n        try {\n            await addCarAction(carData);\n            // State update handled by subscription\n        } catch (error) {\n            console.error(\"Failed to add car:\", error);\n            alert(\"Failed to add car. Please try again.\");\n        }\n    };\n\n    const editCar = async (updatedCar: Car) => {\n        try {\n            await updateCarAction(updatedCar);\n            // State update handled by subscription\n        } catch (error) {\n            console.error(\"Failed to update car:\", error);\n            alert(\"Failed to update car. Please try again.\");\n        }\n    };\n\n    const deleteCar = async (id: string) => {\n        try {\n            await deleteCarAction(id);\n            // State update handled by subscription\n        } catch (error) {\n            console.error(\"Failed to delete car:\", error);\n            alert(\"Failed to delete car. Please try again.\");\n        }\n    };\n\n    return (\n        <CarContext.Provider value={{ cars, addCar, editCar, deleteCar }}>\n            {children}\n        </CarContext.Provider>\n    );\n}\n\nexport function useCarContext() {\n    const context = useContext(CarContext);\n    if (context === undefined) {\n        throw new Error(\"useCarContext must be used within a CarProvider\");\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AALA;;;;;AAcA,MAAM,2BAAa,IAAA,sNAAa,EAA6B;AAEtD,SAAS,YAAY,EAAE,QAAQ,EAAiC;IACnE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC1C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,2CAA2C;IAC3C,IAAA,kNAAS,EAAC;QACN,MAAM,YAAY;YACd,MAAM,OAAO,MAAM,IAAA,iKAAO;YAC1B,iGAAiG;YACjG,+DAA+D;YAC/D,QAAQ;YACR,aAAa;QACjB;QAEA;QAEA,MAAM,UAAU,kIAAQ,CACnB,OAAO,CAAC,iBACR,EAAE,CACC,oBACA;YAAE,OAAO;YAAK,QAAQ;YAAU,OAAO;QAAM,GAC7C,CAAC;YACG,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,IAAI,QAAQ,SAAS,KAAK,UAAU;gBAChC,QAAQ,CAAC,OAAS;wBAAC,QAAQ,GAAG;2BAAmB;qBAAK;YAC1D,OAAO,IAAI,QAAQ,SAAS,KAAK,UAAU;gBACvC,QAAQ,CAAC,OACL,KAAK,GAAG,CAAC,CAAC,MAAS,IAAI,EAAE,KAAK,QAAQ,GAAG,CAAC,EAAE,GAAI,QAAQ,GAAG,GAAkB;YAErF,OAAO,IAAI,QAAQ,SAAS,KAAK,UAAU;gBACvC,QAAQ,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK,QAAQ,GAAG,CAAC,EAAE;YACpE;QACJ,GAEH,SAAS;QAEd,OAAO;YACH,kIAAQ,CAAC,aAAa,CAAC;QAC3B;IACJ,GAAG,EAAE;IAEL,MAAM,SAAS,OAAO;QAClB,IAAI;YACA,MAAM,IAAA,gKAAY,EAAC;QACnB,uCAAuC;QAC3C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,sBAAsB;YACpC,MAAM;QACV;IACJ;IAEA,MAAM,UAAU,OAAO;QACnB,IAAI;YACA,MAAM,IAAA,mKAAe,EAAC;QACtB,uCAAuC;QAC3C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACV;IACJ;IAEA,MAAM,YAAY,OAAO;QACrB,IAAI;YACA,MAAM,IAAA,mKAAe,EAAC;QACtB,uCAAuC;QAC3C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACV;IACJ;IAEA,qBACI,8OAAC,WAAW,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAQ;YAAS;QAAU;kBAC1D;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}}]
}